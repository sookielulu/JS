<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>闭包版本的屏幕缩放事件</title>
    <script>
        window.onload = function () {
            var num = 0;
            var demo = document.getElementById("demo");
            window.onresize = throttle(function () {
                demo.innerHTML = window.innerWidth || document.documentElement.clientWidth;
                num++;
                console.log(num);
            }, 300);


            //节流函数，即每delay毫秒开一次定时器
            //若没有这一步，则IE678在每次屏幕尺寸改变时的num会变化多次
            function throttle(fn, delay) {
                var timer = null;
                return function () {
                    clearTimeout(timer);
                    timer = setTimeout(fn, delay);
                }
            }
        }
    </script>
</head>
<body>
<div id="demo"></div>
</body>
</html>