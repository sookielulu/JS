<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据绑定</title>
    <script src="JSitcast0005--面向对象简单框架.js"></script>
    <script>
        window.onload = function () {
            var isLogin = true;
            if (isLogin) {
                Login();
            }else {
                noLogin();
            }
        }
        function LoginOld() {
            var user = {name: 'Jack'};
            var span = document.getElementById("span");
            span.innerHTML = "欢迎"+ user + "来到xxx世界";
        }


        //    对于简单的绑定，我们可以使用一个函数，大家只需要学会使用就可以了。至于原理我们以后会讲解
        //    要想懂得如下正则表达式，需要掌握如下知识点：
        //    \w	匹配包括下划线的任何单词字符。等价于'[A-Za-z0-9_]'。
        //    \W	匹配任何非单词字符。等价于 '[^A-Za-z0-9_]'。
        //    这里表示寻找到以@开头的字符串，然后用数据替换@之后同名数据

        //    replace的用法，
        // 第一个参数：正则表达式，第二个参数：处理函数：
        // 处理函数的第一个参数：匹配的字符串，第二个参数：括号中的值

        function formateString(str,data) {
            return str.replace(/@\((\w+)\)/g, function(match, key){
                return typeof data[key] === "undefined" ? '' : data[key]});
        }
        function Login() {
            var user = {name: 'Lucy',role: '黄金会员'};
            var span = document.getElementById("span");
            span.innerHTML = formateString("欢迎@(name)<strong>@(role)</strong>来到xxx世界",user);
        }


        //把formateString函数放在框架中，引入框架的写法如下
        /*function Login() {
            var user = {name: 'Lucy',role: '黄金会员'};
            var span = document.getElementById("span");
            span.innerHTML = $$.formateString("欢迎@(name)@(role)来到xxx世界",user);
        }*/
    </script>
</head>
<body>
<div id="div">
    <span id='span'>

    </span>
</div>
</body>
</html>